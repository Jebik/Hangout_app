function inArray(a,t){return t.indexOf(a)>-1}function init(){gapi.hangout.onApiReady.add(function(a){a.isApiReady&&(load_participant(),isTarget()?document.getElementById("warning").style.visibility="visible":document.getElementById("sane_hangout").style.visibility="visible")}),gapi.hangout.onParticipantsChanged.add(load_participant),gapi.hangout.data.onStateChanged.add(updateCheckbox)}function load_participant(){var a=gapi.hangout.getParticipants();muted=[];var t="";for(var e in a){var n=a[e];inArray(n.person.displayName,target)?(t+="<p>"+n.person.displayName+" (TARGET)</p>",muted.push(n.id)):t+="<p>"+n.person.displayName+"</p>"}document.getElementById("hangout_participant").innerHTML=t,document.getElementById("hangout_participant").style.visibility="visible"}function isTarget(){var a=gapi.hangout.getLocalParticipant();return inArray(a.person.displayName,target)}function muteArnaud(){autoMute();var a=SoundHG.length,t=Math.floor(1e3*Math.random());t%=a,SoundHG[t].play()}function autoMute(){for(var a in muted)gapi.hangout.av.muteParticipantMicrophone(muted[a])}function muteLoop(){var a=document.querySelector("#AM-checkbox").checked;a&&(window.setTimeout(muteLoop,100),autoMute())}function updateCheckbox(){var a=gapi.hangout.data.getValue("AM_statut");document.getElementById("AM-checkbox").checked="true"==a?!0:!1}function updateAM(){var a=document.getElementById("AM-checkbox").checked;a?(gapi.hangout.data.setValue("AM_statut","true"),muteLoop()):gapi.hangout.data.setValue("AM_statut","false")}var target=["Etitia Arnaud","Pierre-Harvald Chevalier"];gadgets.util.registerOnLoadHandler(init);var BaseURL="http://cartes.nhova.fr/hangout/static/",SoundURL=[],SoundHG=[],muted=[];SoundURL.push(BaseURL+"vinou_1.wav"),SoundURL.push(BaseURL+"vinou_2.wav"),SoundURL.push(BaseURL+"kevin_1.wav"),SoundURL.push(BaseURL+"kevin_2.wav"),SoundURL.push(BaseURL+"kevin_4.wav"),SoundURL.push(BaseURL+"kevin_3.wav"),SoundURL.push(BaseURL+"pierre.wav");for(var index in SoundURL){var sound=gapi.hangout.av.effects.createAudioResource(SoundURL[index]).createSound({loop:!1,localOnly:!1});SoundHG.push(sound)}